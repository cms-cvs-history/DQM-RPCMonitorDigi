################# D. Lomidze INFN NAPOLI ############$

 process TEST = {

	include "CondCore/DBCommon/data/CondDBSetup.cfi"
	
	source = PoolSource {
	untracked vstring fileNames =   
	 {

'rfio:/castor/cern.ch/cms/store/data/Commissioning08/Cosmics/RAW/v1/000/067/647/FC95ABE8-06A3-DD11-A964-001617C3B654.root',
'rfio:/castor/cern.ch/cms/store/data/Commissioning08/Cosmics/RAW/v1/000/067/647/FCABAB02-04A3-DD11-8192-001D09F29538.root',
'rfio:/castor/cern.ch/cms/store/data/Commissioning08/Cosmics/RAW/v1/000/067/647/FCC91EA4-6CA3-DD11-B66C-000423D98F98.root',
'rfio:/castor/cern.ch/cms/store/data/Commissioning08/Cosmics/RAW/v1/000/067/647/FCFFF80E-51A3-DD11-BBC2-001D09F252DA.root',
'rfio:/castor/cern.ch/cms/store/data/Commissioning08/Cosmics/RAW/v1/000/067/647/FE4944AF-3CA3-DD11-BDEE-000423D99AAA.root',
'rfio:/castor/cern.ch/cms/store/data/Commissioning08/Cosmics/RAW/v1/000/067/647/FE573C17-47A3-DD11-8BD3-001D09F24664.root',
'rfio:/castor/cern.ch/cms/store/data/Commissioning08/Cosmics/RAW/v1/000/067/647/FEF751C0-0BA3-DD11-9D95-000423D9A212.root',
'rfio:/castor/cern.ch/cms/store/data/Commissioning08/Cosmics/RAW/v1/000/067/647/FEF751C0-0BA3-DD11-9D95-000423D9A212.root'

}
	untracked string moduleLogName= "source"

	}
	untracked PSet maxEvents = {untracked int32 input = -1}

        


#service = DQMShipMonitoring{
#	// event-period for shipping monitoring to collector (default: 25)
#	untracked uint32 period = 5
#}


       	service = MessageLogger {
		 untracked vstring destinations = {"RPC_67647.log"}
       	 	PSet RpcUnpacker.log     = {untracked bool noLineBreaks = true   }
         	PSet detailedInfo.txt = {untracked int32  lineLength = 132    }        
	}

 #################    Raw To Digi:   #########################

         #include "EventFilter/RPCRawToDigi/data/RPCUnpacking.cfi"
	 include "EventFilter/RPCRawToDigi/data/RPCSQLiteCabling.cfi"
         include "EventFilter/RPCRawToDigi/data/rpcUnpacker.cfi"
         replace rpcunpacker.doSynchro = true 

 #################    Data Quality Monitoring:   #########################
        include "DQM/RPCMonitorDigi/data/RPCDigiMonitoring.cfi"
	replace rpcdigidqm.DigiEventsInterval = 100
	replace rpcdigidqm.DigiDQMSaveRootFile =true
	replace rpcdigidqm.dqmshifter =true   	    	
	replace rpcdigidqm.dqmexpert =true		
	replace rpcdigidqm.dqmsuperexpert =true    	

	replace rpcdigidqm.RootFileNameDigi="RPC_67647.root"
	#replace rpcdigidqm.RootFileNameDigi="castor/cern.ch/user/d/dlomidze/RPC_67647_out.root"

include "DQMServices/Core/data/DQM.cfg"
	replace DQM.collectorHost = "lxplus221.cern.ch"
	replace DQM.collectorPort = 9190
	replace DQM.debug = false

service = ModuleWebRegistry {}
service = LockService {untracked vstring labels = {"source"} }
#service = DaqMonitorROOTBackEnd { }
#service = MonitorDaemon {
	
#	untracked bool AutoInstantiate = false
#	untracked int32 reconnect_delay = 5
#	untracked string DestinationAddress = "localhost"
#	untracked int32 SendPort = 9090
#	untracked int32 UpdateDelay = 1000	
#	untracked string NameAsSource = "FU0"
#}	



     #################   For RPCRecHits   #########################
	include "Geometry/MuonNumbering/data/muonNumberingInitialization.cfi"
        include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
        include "Geometry/MuonCommonData/data/muonIdealGeometryXML.cfi"
        include "Geometry/RPCGeometry/data/rpcGeometry.cfi"

     # The module for 1D RPC RecHit building
     include "RecoLocalMuon/RPCRecHit/data/rpcRecHits.cfi"
     replace rpcRecHits.rpcDigiLabel = "rpcunpacker"
     #replace rpcRecHits.rpcDigiLabel = "muonRPCDigis"
 #################   Output module  #########################
	module out = PoolOutputModule {
             untracked string fileName ="RPCDQM.root"
     }

  module rpcrawanalyser = RPCRawAnalyser { }


#################   QTest module  #####################
# run the quality tests as defined in QualityTests.xml    
module qTesterRPC = QualityTester {
	untracked int32 prescaleFactor = 1
        untracked bool getQualityTestsFromFile = true
	untracked FileInPath qtList = "DQM/RPCMonitorClient/test/RPCQualityTests.xml"
}

include "DQM/RPCMonitorClient/data/RPCQualityTests.cfi" 


########## DQMEventInfo module ####################
module dqmEventInfoRPC = DQMEventInfo{

untracked string eventInfoFolder = "EventInfo"
untracked  string subSystemFolder ="RPC"

#given in minutes ---0.5 default ---0.15 minimum
untracked double eventRateWindow = 0.5
}

include "DQM/RPCMonitorClient/data/RPCEventSummary.cfi"
replace rpcEventSummary.EventInfoPath = "RPC/EventInfo"
replace rpcEventSummary.RPCPrefixDir = "RPC/RecHits"
replace rpcEventSummary.PrescaleFactor = 1


      #################   Path   #########################

sequence rpcClient ={qTesterRPC,dqmEventInfoRPC,rpcEventSummary}
sequence rpcDigi = {rpcunpacker, rpcrawanalyser,rpcRecHits,rpcdigidqm}
path p = {rpcDigi, rpcClient}

 }
