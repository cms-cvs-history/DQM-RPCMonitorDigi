################# D. Lomidze INFN NAPOLI ############$

 process TEST = {

	#include "CondCore/DBCommon/data/CondDBSetup.cfi"
	
	source = PoolSource {
	untracked vstring fileNames =   
	 {
       	 'file:/afs/cern.ch/user/d/dlomidze/scratch0/globalJuly.digi.root'
	#'file:/tmp/dlomidze/globalJuly.root'
         }
         untracked string moduleLogName= "RPCDigiDQM"

	}
	untracked PSet maxEvents = {untracked int32 input = -1}

        


service = DQMShipMonitoring{
	// event-period for shipping monitoring to collector (default: 25)
	untracked uint32 period = 5
}


       	service = MessageLogger {
		 untracked vstring destinations = {"RpcMonitoring.log"}
       	 	PSet RpcUnpacker.log     = {untracked bool noLineBreaks = true   }
         	PSet detailedInfo.txt = {untracked int32  lineLength = 132    }        
	}

 #################    Raw To Digi:   #########################

         include "EventFilter/RPCRawToDigi/data/RPCUnpacking.cfi"

 #################    Data Quality Monitoring:   #########################
        include "DQM/RPCMonitorDigi/data/RPCDigiMonitoring.cfi"
	replace rpcdigidqm.DigiDQMSaveRootFile =true
	replace rpcdigidqm.dqmshifter =true   	    	
	replace rpcdigidqm.dqmexpert =false		
	replace rpcdigidqm.dqmsuperexpert =false    	

	replace rpcdigidqm.RootFileNameDigi="/afs/cern.ch/user/d/dlomidze/scratch0/globalJulyout.root"

service = ModuleWebRegistry {}
service = LockService {untracked vstring labels = {"source"} }
service = DaqMonitorROOTBackEnd { }
service = MonitorDaemon {
	
	untracked bool AutoInstantiate = true
	untracked int32 reconnect_delay = 5
	untracked string DestinationAddress = "localhost"
	untracked int32 SendPort = 9090
	untracked int32 UpdateDelay = 1000	
	untracked string NameAsSource = "FU0"
}	

#service = ModuleWebRegistry {}
#service = LockService {untracked vstring labels = {"source"} }
#service = DaqMonitorROOTBackEnd{ }
#include "DQMServices/Daemon/test/data/dqm_monitorDaemon.cfi"
#replace MonitorDaemon.AutoInstantiate = true
#replace MonitorDaemon.DestinationAddress = "localhost"



#service = MonitorDaemon{
	# if true, will automatically start DQM thread in background
	# (default: false)
#	untracked bool AutoInstantiate = true
#	untracked string DestinationAddress = "lxplus203.cern.ch"
#	untracked int32 SendPort = 9090
#	untracked int32 UpdateDelay = 50
#	untracked string NameAsSource = "FU0"
#}






     #################   For RPCRecHits   #########################
	include "Geometry/MuonNumbering/data/muonNumberingInitialization.cfi"
        include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
        include "Geometry/MuonCommonData/data/muonIdealGeometryXML.cfi"
        include "Geometry/RPCGeometry/data/rpcGeometry.cfi"

     # The module for 1D RPC RecHit building
     include "RecoLocalMuon/RPCRecHit/data/rpcRecHits.cfi"
    replace rpcRecHits.rpcDigiLabel = "rpcunpacker"

 #################   Output module  #########################
	module out = PoolOutputModule {
             untracked string fileName ="RPCDQM.root"
     }
      #################   Path   #########################

     path p = {rpcRecHits,rpcdigidqm}
 }
