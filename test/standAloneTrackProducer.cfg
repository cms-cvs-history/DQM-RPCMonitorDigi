process standAloneProducer = {
       
# Event source
source = PoolSource {
             untracked vstring fileNames =
		{

		"rfio:/castor/cern.ch/user/b/bellan/MuonReco/CMSSW_1_6_0/muminus100/muminus100_1.root",
		"rfio:/castor/cern.ch/user/b/bellan/MuonReco/CMSSW_1_6_0/muminus100/muminus100_2.root"
               }
             
	}
        untracked PSet maxEvents = {untracked int32 input = -1}

# Magnetic Field
include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

# Geometry
include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cff"
include "Geometry/CommonDetUnit/data/bareGlobalTrackingGeometry.cfi"
include "Geometry/DTGeometry/data/dtGeometry.cfi"
include "Geometry/CSCGeometry/data/cscGeometry.cfi"
include "Geometry/RPCGeometry/data/rpcGeometry.cfi"
include "RecoMuon/DetLayers/data/muonDetLayerGeometry.cfi"

# Service
include "RecoMuon/TrackingTools/data/MuonServiceProxy.cff"
include "RecoMuon/TrackingTools/data/MuonTrackLoader.cff"

service = MessageLogger{}

#RPC Seed
 module RPCSeed = RPCSeedGenerator {
  InputTag RPCRecHitsLabel = rpcRecHits
}  



#STANDALONE MUON RECO
module standAloneMuons = StandAloneMuonProducer {

  InputTag InputObjects = RPCSeed

 using MuonServiceProxy
    using MuonTrackLoaderForSTA


 PSet STATrajBuilderParameters = {


	string SeedPosition = "in"
	string SeedPropagator = "SteppingHelixPropagatorAny"
	string NavigationType = "Standard"
	bool DoBackwardRefit = true
	bool DoSmoothing = false
	
	PSet RefitterParameters = {
	    
	    bool EnableDTMeasurement = false
	    bool EnableCSCMeasurement = false
	   bool EnableRPCMeasurement = true
	    
	    string FitDirection = "insideOut"
	    
	    string Propagator = "SteppingHelixPropagatorAny"
	    
	    double MaxChi2 = 1000 #25.0
	    double NumberOfSigma = 3.0 
	    
	    PSet MuonTrajectoryUpdatorParameters = {
		
		double MaxChi2 = 1000 #25.0
		int32 Granularity = 0
		bool RescaleError = false
		double RescaleErrorFactor = 100.		
	    }	
	}
	
	PSet BWFilterParameters = {
	    
	    bool EnableDTMeasurement = false
	    bool EnableCSCMeasurement = false
	    bool EnableRPCMeasurement = true
	    
	    string BWSeedType = "fromGenerator"
	    string FitDirection = "outsideIn"
	    
	    string Propagator = "SteppingHelixPropagatorAny"	
	    
	    double MaxChi2 = 25.0
	    double NumberOfSigma = 3.0
	    
	    PSet MuonTrajectoryUpdatorParameters = {
		
		double MaxChi2 = 25.0
		int32 Granularity = 2
		bool RescaleError = false
		double RescaleErrorFactor = 100. 
	    }	
	}
	
	PSet SmootherParameters = {
	    double MaxChi2 = 25.0
	    double NumberOfSigma = 3.0
	    double ErrorRescalingFactor = 10.0
	    string Propagator = "SteppingHelixPropagatorAlong"
	}
      }
    }




	# Output
	module out = PoolOutputModule {
	untracked string fileName='/tmp/groselli/standAloneProducer.root'
	    }
  

	# Path 
	path p = {RPCSeed,standAloneMuons}

	# EndPath
	endpath this_is_the_end ={out}


}
