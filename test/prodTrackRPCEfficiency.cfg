process RPCEff = {
	source = PoolSource{
	untracked vstring fileNames = {
	"/store/data/Commissioning08/Cosmics/RECO/v1/000/066/180/9EB16637-3E9A-DD11-B823-000423D94A20.root"
	}
	untracked uint32 debugVebosity = 10
        untracked bool   debugFlag     = true
        }

	untracked PSet maxEvents = {untracked int32 input = 1000}

##################################################################################    
#                                                                                # 
#                        R E C O N S T R U C T I O N                             #
#                                                                                #
##################################################################################    

include "Geometry/CommonDetUnit/data/bareGlobalTrackingGeometry.cfi"
include "RecoMuon/DetLayers/data/muonDetLayerGeometry.cfi"
include "Alignment/CommonAlignmentProducer/data/GlobalPosition_Fake.cff"
include "MagneticField/Engine/data/uniformMagneticField.cfi"
include "RecoLocalMuon/Configuration/data/RecoLocalMuonCosmics.cff"

# The services
include "RecoMuon/TrackingTools/data/MuonServiceProxy.cff"

# Seed generator
include "RecoMuon/MuonSeedGenerator/data/CosmicMuonSeedProducer.cfi"

# Standalone muon producer
include "RecoMuon/StandAloneMuonProducer/data/standAloneMuons.cfi"
replace standAloneMuons.InputObjects = CosmicMuonSeed
replace standAloneMuons.STATrajBuilderParameters.NavigationType = "Direct"
replace standAloneMuons.TrackLoaderParameters.VertexConstraint = false
replace standAloneMuons.STATrajBuilderParameters.BWFilterParameters.EnableRPCMeasurement = false

include "TrackPropagation/SteppingHelixPropagator/data/SteppingHelixPropagatorAny.cfi"

   include "DQMServices/Core/data/DQM.cfg"
	replace DQM.collectorHost = ""
	replace DQM.collectorPort = 9090
	replace DQM.debug = false

   service = ModuleWebRegistry {}
   service = LockService {untracked vstring labels = {"source"} }

   module rpcefftrack = RPCEfficiencyFromTrack{
	bool ReadEndCap = false
	bool ReadBarrel = true
	#Cut 
	double EfficiencyCut = 4.

	#If dtTrigger=0 --> we are reading only Dt Triggered events
	#If dtTrigger=-10 --> we are reading all

	#untracked int32 dtTrigger = 0

	string PropagatorName = "SteppingHelixPropagatorAny"
	untracked string trajectoryInput =  "standAloneMuons"
	untracked string rpcRecHitLabel = "rpcRecHits"
	untracked string rpcDigiLabel = "muonRPCDigis"
        InputTag gmtSource = gtDigis::
	untracked string EffRootFileName = "RPC.root"
	untracked string GlobalRootFileName = "Global.root"
   }

   path p1 = {CosmicMuonSeed,standAloneMuons,rpcefftrack}

}
